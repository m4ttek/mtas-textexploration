<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.4 at 2019-06-05 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20190605" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Multi Tier Annotation Search &#x2013; Facets</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>MTAS</h2>
                </div>
                      </div>
        <div class="pull-right">                  <a href="https://www.textexploration.org/" id="bannerRight">
                                                                                                <img src="images/texplo.png"  alt="Text Exploration" width="120" height="120"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="projectVersion">Version: 8.1.1.1-SNAPSHOT
                          <span class="divider">|</span>
                    </li>
                              <li class="">
                    <a href="index.html" title="Mtas">
        Mtas</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">Facets</li>
                
              
                  <li id="publishDate" class="pull-right">Last Published: 2019-06-05</li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Mtas</li>
                              
      <li>
  
                          <a href="index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="features.html" title="Features">
          <span class="none"></span>
        Features</a>
            </li>
                                                                                                      
      <li>
  
                          <a href="installation.html" title="Getting started">
          <span class="icon-chevron-right"></span>
        Getting started</a>
                  </li>
                                                                                                                                                                                                      
      <li>
  
                          <a href="indexing.html" title="Indexing">
          <span class="icon-chevron-right"></span>
        Indexing</a>
                  </li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  
      <li>
  
                          <a href="search.html" title="Search">
          <span class="icon-chevron-down"></span>
        Search</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="search_configuration.html" title="Configuration">
          <span class="none"></span>
        Configuration</a>
            </li>
                                                                                                                                                                                                                                                                                                                                            
      <li>
  
                          <a href="search_component.html" title="Component">
          <span class="icon-chevron-down"></span>
        Component</a>
                    <ul class="nav nav-list">
                                                                                                          
      <li>
  
                          <a href="search_component_stats.html" title="Statistics">
          <span class="icon-chevron-right"></span>
        Statistics</a>
                  </li>
                    
      <li>
  
                          <a href="search_component_heatmap.html" title="Heatmap">
          <span class="none"></span>
        Heatmap</a>
            </li>
                    
      <li>
  
                          <a href="search_component_kwic.html" title="Kwic">
          <span class="none"></span>
        Kwic</a>
            </li>
                    
      <li>
  
                          <a href="search_component_list.html" title="List">
          <span class="none"></span>
        List</a>
            </li>
                    
      <li>
  
                          <a href="search_component_page.html" title="Page">
          <span class="none"></span>
        Page</a>
            </li>
                    
      <li>
  
                          <a href="search_component_document.html" title="Document">
          <span class="none"></span>
        Document</a>
            </li>
                    
      <li>
  
                          <a href="search_component_termvector.html" title="Termvector">
          <span class="none"></span>
        Termvector</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>Facet</a>
          </li>
                    
      <li>
  
                          <a href="search_component_group.html" title="Group">
          <span class="none"></span>
        Group</a>
            </li>
                    
      <li>
  
                          <a href="search_component_prefix.html" title="Prefix">
          <span class="none"></span>
        Prefix</a>
            </li>
                    
      <li>
  
                          <a href="search_component_collection.html" title="Collection">
          <span class="none"></span>
        Collection</a>
            </li>
                    
      <li>
  
                          <a href="search_component_version.html" title="Version">
          <span class="none"></span>
        Version</a>
            </li>
              </ul>
        </li>
                                                                                                    
      <li>
  
                          <a href="search_parser.html" title="Parser">
          <span class="icon-chevron-down"></span>
        Parser</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="search_parser_cql.html" title="CQL query">
          <span class="none"></span>
        CQL query</a>
            </li>
                    
      <li>
  
                          <a href="search_parser_simple.html" title="Simple query">
          <span class="none"></span>
        Simple query</a>
            </li>
                    
      <li>
  
                          <a href="search_parser_join.html" title="Join query">
          <span class="none"></span>
        Join query</a>
            </li>
              </ul>
        </li>
                    
      <li>
  
                          <a href="search_handler.html" title="Handler">
          <span class="none"></span>
        Handler</a>
            </li>
                    
      <li>
  
                          <a href="search_stats.html" title="Type of statistics">
          <span class="none"></span>
        Type of statistics</a>
            </li>
                    
      <li>
  
                          <a href="search_functions.html" title="Functions">
          <span class="none"></span>
        Functions</a>
            </li>
                    
      <li>
  
                          <a href="search_cql.html" title="CQL">
          <span class="none"></span>
        CQL</a>
            </li>
                    
      <li>
  
                          <a href="search_simple.html" title="Simple">
          <span class="none"></span>
        Simple</a>
            </li>
                    
      <li>
  
                          <a href="search_sharding.html" title="Sharding">
          <span class="none"></span>
        Sharding</a>
            </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="download.html" title="Download">
          <span class="none"></span>
        Download</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                              
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                        
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
              
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <h1>Facets</h1>
<p>Mtas can produce facets on metadata for Mtas queries. To get this information, in Solr requests, besides the parameter to enable the <a href="search_component.html">Mtas query component</a>, the following parameter should be provided.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Parameter </th>
      
<th>Value </th>
      
<th>Obligatory </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>mtas.facet </td>
      
<td>true </td>
      
<td>yes </td>
    </tr>
  </tbody>
</table>
<p>Multiple facet results can be produced within the same request. To distinguish them, a unique identifier has to be provided for each of the required document results.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Parameter </th>
      
<th>Value </th>
      
<th>Info </th>
      
<th>Obligatory </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>mtas.facet.&lt;identifier&gt;.key </td>
      
<td>&lt;string&gt; </td>
      
<td>key used in response </td>
      
<td>no </td>
    </tr>
    
<tr class="a">
      
<td>mtas.facet.&lt;identifier&gt;.field </td>
      
<td>&lt;string&gt; </td>
      
<td>Mtas field </td>
      
<td>yes </td>
    </tr>
  </tbody>
</table>
<div class="section">
<h2><a name="Queries"></a>Queries</h2>
<p>One or multiple queries on the defined Mtas field have to be defined</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Parameter </th>
      
<th>Value </th>
      
<th>Info </th>
      
<th>Obligatory </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>mtas.facet.&lt;identifier&gt;.query.&lt;identifier query&gt;.type </td>
      
<td>&lt;string&gt; </td>
      
<td>query language: <a href="search_cql.html">cql</a> </td>
      
<td>yes </td>
    </tr>
    
<tr class="a">
      
<td>mtas.facet.&lt;identifier&gt;.query.&lt;identifier query&gt;.value </td>
      
<td>&lt;string&gt; </td>
      
<td>query: <a href="search_cql.html">cql</a> </td>
      
<td>yes </td>
    </tr>
    
<tr class="b">
      
<td>mtas.facet.&lt;identifier&gt;.query.&lt;identifier query&gt;.prefix </td>
      
<td>&lt;string&gt; </td>
      
<td>default prefix </td>
      
<td>no </td>
    </tr>
    
<tr class="a">
      
<td>mtas.facet.&lt;identifier&gt;.query.&lt;identifier query&gt;.ignore </td>
      
<td>&lt;string&gt; </td>
      
<td>ignore query: <a href="search_cql.html">cql</a> </td>
      
<td>no </td>
    </tr>
    
<tr class="b">
      
<td>mtas.facet.&lt;identifier&gt;.query.&lt;identifier query&gt;.maximumIgnoreLength </td>
      
<td>&lt;integer&gt; </td>
      
<td>maximum number of succeeding occurrences to ignore </td>
      
<td>no </td>
    </tr>
  </tbody>
</table>
<div class="section">
<h3><a name="Variables"></a>Variables</h3>
<p>The query may contain one or more variables, and the value(s) of these variables have to be defined </p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Parameter </th>
      
<th>Value </th>
      
<th>Info </th>
      
<th>Obligatory </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>mtas.facet.&lt;identifier&gt;.query.&lt;identifier query&gt;.variable.&lt;identifier variable&gt;.name </td>
      
<td>&lt;string&gt; </td>
      
<td>name of variable </td>
      
<td>yes </td>
    </tr>
    
<tr class="a">
      
<td>mtas.facet.&lt;identifier&gt;.query.&lt;identifier query&gt;.variable.&lt;identifier variable&gt;.value </td>
      
<td>&lt;string&gt; </td>
      
<td>comma separated list of values </td>
      
<td>yes </td>
    </tr>
  </tbody>
</table></div></div>
<div class="section">
<h2><a name="Base"></a>Base</h2>
<p>One or multiple fields to produce facets over have to be defined</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Parameter </th>
      
<th>Value </th>
      
<th>Info </th>
      
<th>Obligatory </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>mtas.facet.&lt;identifier&gt;.base.&lt;identifier base&gt;.field </td>
      
<td>&lt;string&gt; </td>
      
<td>field to produce facet over </td>
      
<td>yes </td>
    </tr>
    
<tr class="a">
      
<td>mtas.facet.&lt;identifier&gt;.base.&lt;identifier base&gt;.type </td>
      
<td>&lt;string&gt; </td>
      
<td>required <a href="search_stats.html">type of statistics</a> </td>
      
<td>no </td>
    </tr>
    
<tr class="b">
      
<td>mtas.facet.&lt;identifier&gt;.base.&lt;identifier base&gt;.sort.type </td>
      
<td>&lt;string&gt; </td>
      
<td>sort on term or <a href="search_stats.html">type of statistics</a> </td>
      
<td>no </td>
    </tr>
    
<tr class="a">
      
<td>mtas.facet.&lt;identifier&gt;.base.&lt;identifier base&gt;.sort.direction </td>
      
<td>&lt;string&gt; </td>
      
<td>sort direction: asc or desc </td>
      
<td>no </td>
    </tr>
    
<tr class="b">
      
<td>mtas.facet.&lt;identifier&gt;.base.&lt;identifier base&gt;.number </td>
      
<td>&lt;double&gt; </td>
      
<td>number of facets </td>
      
<td>no </td>
    </tr>
    
<tr class="a">
      
<td>mtas.facet.&lt;identifier&gt;.base.&lt;identifier base&gt;.minimum </td>
      
<td>&lt;double&gt; </td>
      
<td>minimum number of occurrences span(s) </td>
      
<td>no </td>
    </tr>
    
<tr class="b">
      
<td>mtas.facet.&lt;identifier&gt;.base.&lt;identifier base&gt;.maximum </td>
      
<td>&lt;double&gt; </td>
      
<td>maximum number of occurrences span(s) </td>
      
<td>no </td>
    </tr>
  </tbody>
</table>
<div class="section">
<h3><a name="Ranges"></a>Ranges</h3>
<p>Number values can be grouped into ranges by defining a size and optionally a base for these ranges.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Parameter </th>
      
<th>Value </th>
      
<th>Info </th>
      
<th>Obligatory </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>mtas.facet.&lt;identifier&gt;.base.&lt;identifier base&gt;.range.size </td>
      
<td>&lt;double&gt; </td>
      
<td>size of the range </td>
      
<td>yes </td>
    </tr>
    
<tr class="a">
      
<td>mtas.facet.&lt;identifier&gt;.base.&lt;identifier base&gt;.range.base </td>
      
<td>&lt;double&gt; </td>
      
<td>base for the ranges </td>
      
<td>no </td>
    </tr>
  </tbody>
</table></div>
<div class="section">
<h3><a name="Functions"></a>Functions</h3>
<p>To compute statistics for values based on the occurrence of one or multiple spans, optionally <a href="search_functions.html">functions</a> can be added. The parameters for these functions are the number of occurrences <i>$q0</i>, <i>$q1</i>, &#x2026; for each span and the number of positions <i>$n</i> in a document. Statistics on the value computed for each document in the set are added to the response.</p>

<table border="0" class="table table-striped">
  <thead>
    
<tr class="a">
      
<th>Parameter </th>
      
<th>Value </th>
      
<th>Info </th>
      
<th>Obligatory </th>
    </tr>
  </thead>
  <tbody>
    
<tr class="b">
      
<td>mtas.facet.&lt;identifier&gt;.base.&lt;identifier base&gt;.function.&lt;identifier function&gt;.key </td>
      
<td>&lt;string&gt; </td>
      
<td>key used in response </td>
      
<td>no </td>
    </tr>
    
<tr class="a">
      
<td>mtas.facet.&lt;identifier&gt;.base.&lt;identifier base&gt;.function.&lt;identifier function&gt;.expression </td>
      
<td>&lt;string&gt; </td>
      
<td>see <a href="search_functions.html">functions</a> </td>
      
<td>yes </td>
    </tr>
    
<tr class="b">
      
<td>mtas.facet.&lt;identifier&gt;.base.&lt;identifier base&gt;.function.&lt;identifier function&gt;.type </td>
      
<td>&lt;string&gt; </td>
      
<td>required <a href="search_stats.html">type of statistics</a> </td>
      
<td>no </td>
    </tr>
  </tbody>
</table>
<p>The key is added to the response and may be used to distinguish between multiple functions, and should therefore be unique within each specified facet base.</p>
<hr /></div></div>
<div class="section">
<h2><a name="Examples"></a>Examples</h2>

<ol style="list-style-type: decimal">
  
<li><a href="#basic">Basic</a> : basic facet on occurring part of speech</li>
  
<li><a href="#multiple">Multiple</a> : multiple facets on occurring part of speech</li>
  
<li><a href="#variable">Variable</a> : facets on occurring part of speech with variable</li>
  
<li><a href="#range">Range</a> : facet on occurring part of speech with range</li>
  
<li><a href="#function">Function</a> : facet on occurring part of speech with function</li>
</ol>
<hr />
<p><a name="basic"></a> </p>
<div class="section">
<h3><a name="Basic"></a>Basic</h3>
<p><b>Example</b><br />Facet over year for CQL query <tt>[pos=&quot;N&quot;]</tt>.</p>
<p><b>Request and response</b><br /><tt>q=*:*&amp;mtas=true&amp;mtas.facet=true&amp;mtas.facet.0.field=test&amp;mtas.facet.0.key=example+-+basic&amp;mtas.facet.0.query.0.type=cql&amp;mtas.facet.0.query.0.value=[pos%3D&quot;N&quot;]&amp;mtas.facet.0.base.0.field=year&amp;mtas.facet.0.base.0.sort.type=sum&amp;mtas.facet.0.base.0.sort.direction=desc&amp;mtas.facet.0.base.0.number=3&amp;rows=0&amp;wt=json&amp;indent=true</tt></p>

<div class="source">
<div class="source"><pre class="prettyprint">&quot;mtas&quot;:{
    &quot;facet&quot;:[{
        &quot;key&quot;:&quot;example - basic&quot;,
        &quot;listTotal&quot;:257,
        &quot;list&quot;:[{
            &quot;mean&quot;:380.58187772925766,
            &quot;sum&quot;:697226,
            &quot;n&quot;:1832,
            &quot;key&quot;:&quot;1997&quot;},
          {
            &quot;mean&quot;:389.84488636363636,
            &quot;sum&quot;:686127,
            &quot;n&quot;:1760,
            &quot;key&quot;:&quot;1999&quot;},
          {
            &quot;mean&quot;:415.17861482381534,
            &quot;sum&quot;:683384,
            &quot;n&quot;:1646,
            &quot;key&quot;:&quot;2002&quot;}]}]}
</pre></div></div>
<p><a name="multiple"></a> </p></div>
<div class="section">
<h3><a name="Multiple"></a>Multiple</h3>
<p><b>Example</b><br />Facet over genre and year for CQL query <tt>[pos=&quot;N&quot;]</tt>.</p>
<p><b>Request and response</b><br /><tt>q=*:*&amp;mtas=true&amp;mtas.facet=true&amp;mtas.facet.0.field=test&amp;mtas.facet.0.key=example+-+multiple&amp;mtas.facet.0.query.0.type=cql&amp;mtas.facet.0.query.0.value=[pos%3D&quot;N&quot;]&amp;mtas.facet.0.base.0.field=genre&amp;mtas.facet.0.base.0.sort.type=sum&amp;mtas.facet.0.base.0.sort.direction=desc&amp;mtas.facet.0.base.0.number=2&amp;mtas.facet.0.base.1.field=year&amp;mtas.facet.0.base.1.sort.type=sum&amp;mtas.facet.0.base.1.sort.direction=desc&amp;mtas.facet.0.base.1.number=2&amp;rows=0&amp;wt=json&amp;indent=true</tt></p>

<div class="source">
<div class="source"><pre class="prettyprint">&quot;mtas&quot;:{
    &quot;facet&quot;:[{
        &quot;key&quot;:&quot;example - multiple&quot;,
        &quot;listTotal&quot;:26,
        &quot;list&quot;:[{
            &quot;mean&quot;:409.7034217657067,
            &quot;sum&quot;:65015836,
            &quot;n&quot;:158690,
            &quot;listTotal&quot;:257,
            &quot;list&quot;:{
              &quot;1997&quot;:{
                &quot;mean&quot;:380.58187772925766,
                &quot;sum&quot;:697226,
                &quot;n&quot;:1832},
              &quot;1999&quot;:{
                &quot;mean&quot;:389.84488636363636,
                &quot;sum&quot;:686127,
                &quot;n&quot;:1760}},
            &quot;key&quot;:&quot;jaarboeken&quot;},
          {
            &quot;mean&quot;:409.7034217657067,
            &quot;sum&quot;:65015836,
            &quot;n&quot;:158690,
            &quot;listTotal&quot;:257,
            &quot;list&quot;:{
              &quot;1997&quot;:{
                &quot;mean&quot;:380.58187772925766,
                &quot;sum&quot;:697226,
                &quot;n&quot;:1832},
              &quot;1999&quot;:{
                &quot;mean&quot;:389.84488636363636,
                &quot;sum&quot;:686127,
                &quot;n&quot;:1760}},
            &quot;key&quot;:&quot;periodieken&quot;}]}]}
</pre></div></div>
<p><a name="variable"></a> </p></div>
<div class="section">
<h3><a name="Variable"></a>Variable</h3>
<p><b>Example</b><br />Facet over year for CQL query <tt>[pos=$1]</tt> with <tt>$1</tt> equal to <tt>N,ADJ</tt>.</p>
<p><b>Request and response</b><br /><tt>q=*:*&amp;mtas=true&amp;mtas.facet=true&amp;mtas.facet.0.field=text&amp;mtas.facet.0.key=example+-+variable&amp;mtas.facet.0.query.0.type=cql&amp;mtas.facet.0.query.0.value=[pos%3D$1]&amp;mtas.facet.0.query.0.variable.0.name=1&amp;mtas.facet.0.query.0.variable.0.value=N,ADJ&amp;mtas.facet.0.base.0.field=year&amp;mtas.facet.0.base.0.sort.type=sum&amp;mtas.facet.0.base.0.sort.direction=desc&amp;mtas.facet.0.base.0.number=3&amp;rows=0&amp;wt=json&amp;indent=true</tt></p>

<div class="source">
<div class="source"><pre class="prettyprint">&quot;mtas&quot;:{
    &quot;facet&quot;:[{
        &quot;key&quot;:&quot;example - variable&quot;,
        &quot;listTotal&quot;:257,
        &quot;list&quot;:[{
            &quot;mean&quot;:531.8187772925764,
            &quot;sum&quot;:974292,
            &quot;n&quot;:1832,
            &quot;key&quot;:&quot;1997&quot;},
          {
            &quot;mean&quot;:545.3232954545455,
            &quot;sum&quot;:959769,
            &quot;n&quot;:1760,
            &quot;key&quot;:&quot;1999&quot;},
          {
            &quot;mean&quot;:573.460510328068,
            &quot;sum&quot;:943916,
            &quot;n&quot;:1646,
            &quot;key&quot;:&quot;2002&quot;}]}]}
</pre></div></div>
<p><a name="range"></a> </p></div>
<div class="section">
<h3><a name="Range"></a>Range</h3>
<p><b>Example</b><br />Facet over year with ranges of size 10 for CQL query <tt>[pos=&quot;N&quot;]</tt>.</p>
<p><b>Request and response</b><br /><tt>q=*:*&amp;mtas=true&amp;mtas.facet=true&amp;mtas.facet.0.field=test&amp;mtas.facet.0.key=example+-+range&amp;mtas.facet.0.query.0.type=cql&amp;mtas.facet.0.query.0.value=[pos%3D&quot;N&quot;]&amp;mtas.facet.0.base.0.field=year&amp;mtas.facet.0.base.0.sort.type=sum&amp;mtas.facet.0.base.0.sort.direction=desc&amp;mtas.facet.0.base.0.number=3&amp;mtas.facet.0.base.0.range.size=10&amp;mtas.facet.0.base.0.range.base=0&amp;rows=0&amp;wt=json&amp;indent=true</tt></p>

<div class="source">
<div class="source"><pre class="prettyprint">&quot;mtas&quot;:{
    &quot;facet&quot;:[{
        &quot;key&quot;:&quot;example - range&quot;,
        &quot;listTotal&quot;:29,
        &quot;list&quot;:[{
            &quot;mean&quot;:369.9619179400794,
            &quot;sum&quot;:6149507,
            &quot;n&quot;:16622,
            &quot;key&quot;:&quot;1990-1999&quot;},
          {
            &quot;mean&quot;:559.2636835405855,
            &quot;sum&quot;:5711760,
            &quot;n&quot;:10213,
            &quot;key&quot;:&quot;1900-1909&quot;},
          {
            &quot;mean&quot;:482.52500238117915,
            &quot;sum&quot;:5066030,
            &quot;n&quot;:10499,
            &quot;key&quot;:&quot;1910-1919&quot;}]}]}
</pre></div></div>
<p><a name="function"></a> </p></div>
<div class="section">
<h3><a name="Function"></a>Function</h3>
<p><b>Example</b><br />Facet over year for CQL query <tt>[pos=&quot;N&quot;]</tt> with function.</p>
<p><b>Request and response</b><br /><tt>q=*:*&amp;mtas=true&amp;mtas.facet=true&amp;mtas.facet.0.field=test&amp;mtas.facet.0.key=example+-+basic&amp;mtas.facet.0.query.0.type=cql&amp;mtas.facet.0.query.0.value=[pos%3D&quot;N&quot;]&amp;mtas.facet.0.base.0.field=year&amp;mtas.facet.0.base.0.sort.type=sum&amp;mtas.facet.0.base.0.sort.direction=desc&amp;mtas.facet.0.base.0.number=2&amp;mtas.facet.0.base.0.minimum=1&amp;mtas.facet.0.base.0.function.0.key=relative&amp;mtas.facet.0.base.0.function.0.expression=$q0/$n&amp;rows=0&amp;wt=json&amp;indent=true</tt></p>

<div class="source">
<div class="source"><pre class="prettyprint">&quot;mtas&quot;:{
    &quot;facet&quot;:[{
        &quot;key&quot;:&quot;example - basic&quot;,
        &quot;listTotal&quot;:255,
        &quot;list&quot;:[{
            &quot;mean&quot;:515.6997041420118,
            &quot;sum&quot;:697226,
            &quot;n&quot;:1352,
            &quot;functions&quot;:{
              &quot;relative&quot;:{
                &quot;mean&quot;:0.17235837258586809,
                &quot;sum&quot;:233.02851973609367,
                &quot;n&quot;:1352}},
            &quot;key&quot;:&quot;1997&quot;},
          {
            &quot;mean&quot;:476.14642609299096,
            &quot;sum&quot;:686127,
            &quot;n&quot;:1441,
            &quot;functions&quot;:{
              &quot;relative&quot;:{
                &quot;mean&quot;:0.17248794525621,
                &quot;sum&quot;:248.55512911419862,
                &quot;n&quot;:1441}},
            &quot;key&quot;:&quot;1999&quot;}]}]}
</pre></div></div>
<p><b>Lucene</b></p>
<p>To produce facets on metadata <a href="installation_lucene.html">directly in Lucene</a>, <i>ComponentFacet</i> together with the provided <i>collect</i> method can be used.</p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2019
                        <a href="https://www.textexploration.org/">Text Exploration</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
